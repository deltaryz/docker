floof.zone {
    tls delta@floof.zone
    root /srv/floof.zone
}

cameronseid.com {
    tls me@cameronseid.com
    root /srv/cameronseid.com
    
    git {
        repo        https://github.com/deltaryz/cameronseid.com
        path        .
        interval    1800
    }
}

blog.cameronseid.com {
    tls me@cameronseid.com
    proxy / floof.zone:7000
}

e669.fun {
    tls delta@floof.zone
    root /srv/e669.fun

    git {
        repo        https://github.com/deltaryz/e669-neo
        path        ./.repo
        interval    1800

        then        apk add --no-cache nodejs npm
        then        npm install .
        then        npm run-script build
        then        sleep 2
        then        rm -rf ../assets/
        then        sh -c "mv www/* ../"
    }
}
