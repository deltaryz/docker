version: "3.8"
services:
  caddy:
    build:
      context: .
      dockerfile: Dockerfile
    # image: abiosoft/caddy:no-stats
    container_name: caddy
    restart: always
    environment:
      - ACME_AGREE=true
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - "./Caddyfile:/etc/Caddyfile"
      - "caddy_data:/root/.caddy"
      - "/home/delta/web:/srv"
      - "/home/delta/web/floof.zone/files/dj:/srv/deltaryz.com/mixes"
      - "/home/delta/win10:/srv/floof.zone/files/os/win10"
      - "/home/delta/torrents:/srv/floof.zone/files/torrents"
  minecraft:
    image: marctv/minecraft-papermc-server:latest
    container_name: minecraft
    restart: always
    environment:
      - PUID=1000
      - PGID=1000
      - MEMORYSIZE=2G
    ports:
      - "25565:25565"
      - "25575:25575"
      - "25585:25585"
      - "19132:19132/udp"
    volumes:
      - "/home/delta/game/minecraft:/data:rw"
      - "/home/delta/game/minecraft/server.jar:/opt/minecraft/paperspigot.jar"

volumes:
  caddy_data:
